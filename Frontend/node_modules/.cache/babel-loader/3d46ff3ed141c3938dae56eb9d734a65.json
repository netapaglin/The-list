{"ast":null,"code":"import axios from \"axios\";\nimport store from \"../Redux/Store\";\nimport { addTaskAction, deleteTaskAction, fetchTaskAction, updateTaskAction } from \"../Redux/TaskState\";\nimport config from \"../Utils/Config\";\nclass TasksService {\n  // Get all tasks: \n  async getAllTasks() {\n    if (store.getState().tasksState.tasks.length === 0) {\n      const response = await axios.get(config.tasksUrl);\n      const tasks = response.data;\n      store.dispatch(fetchTaskAction(tasks));\n    }\n    return store.getState().tasksState.tasks;\n  }\n  async getTasksByList(listId) {\n    if (store.getState().tasksState.tasks.length === 0) {\n      const response = await axios.get(config.tasksByListUrl + listId);\n      const tasks = response.data;\n      console.log(\"tasks\");\n      console.log(tasks);\n      store.dispatch(fetchTaskAction(tasks));\n    }\n    return store.getState().tasksState.tasks;\n  }\n\n  // Add task: \n  async addTask(task, listId) {\n    task.done = false;\n    const response = await axios.post(config.addTaskUrl + listId, task);\n    store.dispatch(addTaskAction(response.data));\n    return response.data;\n  }\n\n  // Edit task: \n  async editTask(task, taskId) {\n    const response = await axios.put(config.editTaskUrl + taskId, task);\n    g;\n    console.log(\"response.data\");\n    console.log(response.data);\n    store.dispatch(updateTaskAction(task));\n    return response.data;\n  }\n\n  //         // Add list: \n  // public async addList(list: ListModel): Promise<ListModel> {\n  //     const response = await axios.post<ListModel>(config.addListUrl, list);\n  //     return response.data;\n  // }\n\n  // public async fetchProducts(): Promise<ProductModel[]> {\n  //     if(store.getState().productsState.products.length === 0) {\n  //         const response = await axios.get<ProductModel[]>(config.productsUrl + \"delayed\");\n  //         const products = response.data;\n  //         store.dispatch(fetchProductsAction(products));\n  //     }\n  //     return store.getState().productsState.products;\n  // }\n\n  // Delete task: \n  async deleteTasks(taskId) {\n    await axios.delete(config.deletetasksUrl + taskId);\n    store.dispatch(deleteTaskAction(taskId));\n  }\n\n  // // Get all targets: \n  // public async getAllTargets(): Promise<TargetModel[]> {\n  //     const response = await axios.get<TargetModel[]>(config.targetsUrl);\n  //     return response.data;\n  // }\n\n  // // Get gifts by target id: \n  // public async getGiftsByTarget(targetId: number): Promise<GiftModel[]> {\n  //     const response = await axios.get<GiftModel[]>(config.giftsByTargetUrl + targetId);\n  //     return response.data;\n  // }\n\n  // // Add gift: \n  // public async addGift(gift: GiftModel): Promise<GiftModel> {\n  //     const response = await axios.post<GiftModel>(config.giftsUrl, gift);\n  //     return response.data;\n  // }\n}\n\nconst tasksService = new TasksService();\nexport default tasksService;","map":{"version":3,"names":["axios","store","addTaskAction","deleteTaskAction","fetchTaskAction","updateTaskAction","config","TasksService","getAllTasks","getState","tasksState","tasks","length","response","get","tasksUrl","data","dispatch","getTasksByList","listId","tasksByListUrl","console","log","addTask","task","done","post","addTaskUrl","editTask","taskId","put","editTaskUrl","g","deleteTasks","delete","deletetasksUrl","tasksService"],"sources":["C:/Users/Neta/Documents/full stack/The list/Frontend/src/Services/task-service.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport TaskModel from \"../Models/TaskModel\";\r\nimport store from \"../Redux/Store\";\r\nimport { addTaskAction, deleteTaskAction, fetchTaskAction, updateTaskAction } from \"../Redux/TaskState\";\r\nimport config from \"../Utils/Config\";\r\nimport listsService from \"./list-service\";\r\n\r\nclass TasksService {\r\n\r\n    // Get all tasks: \r\n    public async getAllTasks(): Promise<TaskModel[]> {\r\n        if (store.getState().tasksState.tasks.length === 0) {\r\n            const response = await axios.get<TaskModel[]>(config.tasksUrl);\r\n            const tasks = response.data;\r\n            store.dispatch(fetchTaskAction(tasks))\r\n        }\r\n\r\n        return store.getState().tasksState.tasks\r\n    }\r\n\r\n\r\n    public async getTasksByList(listId: string): Promise<TaskModel[]> {\r\n\r\n        if (store.getState().tasksState.tasks.length === 0) {\r\n            const response = await axios.get<TaskModel[]>(config.tasksByListUrl + listId);\r\n            const tasks = response.data;\r\n            console.log(\"tasks\")\r\n            console.log(tasks)\r\n            store.dispatch(fetchTaskAction(tasks))\r\n        }\r\n\r\n        return store.getState().tasksState.tasks\r\n    }\r\n\r\n    // Add task: \r\n    public async addTask(task: TaskModel, listId: string): Promise<TaskModel> {\r\n        task.done = false\r\n        const response = await axios.post<TaskModel>(config.addTaskUrl + listId, task);\r\n        store.dispatch(addTaskAction(response.data));\r\n        return response.data;\r\n    }\r\n\r\n    // Edit task: \r\n    public async editTask(task: TaskModel, taskId: string): Promise<TaskModel> {\r\n        const response = await axios.put<TaskModel>(config.editTaskUrl + taskId, task);g\r\n        console.log(\"response.data\")\r\n        console.log(response.data)\r\n        store.dispatch(updateTaskAction(task));\r\n        return response.data;\r\n    }\r\n\r\n    //         // Add list: \r\n    // public async addList(list: ListModel): Promise<ListModel> {\r\n    //     const response = await axios.post<ListModel>(config.addListUrl, list);\r\n    //     return response.data;\r\n    // }\r\n\r\n    // public async fetchProducts(): Promise<ProductModel[]> {\r\n    //     if(store.getState().productsState.products.length === 0) {\r\n    //         const response = await axios.get<ProductModel[]>(config.productsUrl + \"delayed\");\r\n    //         const products = response.data;\r\n    //         store.dispatch(fetchProductsAction(products));\r\n    //     }\r\n    //     return store.getState().productsState.products;\r\n    // }\r\n\r\n    // Delete task: \r\n    public async deleteTasks(taskId: string): Promise<void> {\r\n        await axios.delete(config.deletetasksUrl + taskId);\r\n        store.dispatch(deleteTaskAction(taskId));\r\n    }\r\n\r\n    // // Get all targets: \r\n    // public async getAllTargets(): Promise<TargetModel[]> {\r\n    //     const response = await axios.get<TargetModel[]>(config.targetsUrl);\r\n    //     return response.data;\r\n    // }\r\n\r\n    // // Get gifts by target id: \r\n    // public async getGiftsByTarget(targetId: number): Promise<GiftModel[]> {\r\n    //     const response = await axios.get<GiftModel[]>(config.giftsByTargetUrl + targetId);\r\n    //     return response.data;\r\n    // }\r\n\r\n    // // Add gift: \r\n    // public async addGift(gift: GiftModel): Promise<GiftModel> {\r\n    //     const response = await axios.post<GiftModel>(config.giftsUrl, gift);\r\n    //     return response.data;\r\n    // }\r\n}\r\n\r\nconst tasksService = new TasksService()\r\nexport default tasksService;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAOC,KAAK,MAAM,gBAAgB;AAClC,SAASC,aAAa,EAAEC,gBAAgB,EAAEC,eAAe,EAAEC,gBAAgB,QAAQ,oBAAoB;AACvG,OAAOC,MAAM,MAAM,iBAAiB;AAGpC,MAAMC,YAAY,CAAC;EAEf;EACA,MAAaC,WAAW,GAAyB;IAC7C,IAAIP,KAAK,CAACQ,QAAQ,EAAE,CAACC,UAAU,CAACC,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;MAChD,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAcR,MAAM,CAACS,QAAQ,CAAC;MAC9D,MAAMJ,KAAK,GAAGE,QAAQ,CAACG,IAAI;MAC3Bf,KAAK,CAACgB,QAAQ,CAACb,eAAe,CAACO,KAAK,CAAC,CAAC;IAC1C;IAEA,OAAOV,KAAK,CAACQ,QAAQ,EAAE,CAACC,UAAU,CAACC,KAAK;EAC5C;EAGA,MAAaO,cAAc,CAACC,MAAc,EAAwB;IAE9D,IAAIlB,KAAK,CAACQ,QAAQ,EAAE,CAACC,UAAU,CAACC,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;MAChD,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAcR,MAAM,CAACc,cAAc,GAAGD,MAAM,CAAC;MAC7E,MAAMR,KAAK,GAAGE,QAAQ,CAACG,IAAI;MAC3BK,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpBD,OAAO,CAACC,GAAG,CAACX,KAAK,CAAC;MAClBV,KAAK,CAACgB,QAAQ,CAACb,eAAe,CAACO,KAAK,CAAC,CAAC;IAC1C;IAEA,OAAOV,KAAK,CAACQ,QAAQ,EAAE,CAACC,UAAU,CAACC,KAAK;EAC5C;;EAEA;EACA,MAAaY,OAAO,CAACC,IAAe,EAAEL,MAAc,EAAsB;IACtEK,IAAI,CAACC,IAAI,GAAG,KAAK;IACjB,MAAMZ,QAAQ,GAAG,MAAMb,KAAK,CAAC0B,IAAI,CAAYpB,MAAM,CAACqB,UAAU,GAAGR,MAAM,EAAEK,IAAI,CAAC;IAC9EvB,KAAK,CAACgB,QAAQ,CAACf,aAAa,CAACW,QAAQ,CAACG,IAAI,CAAC,CAAC;IAC5C,OAAOH,QAAQ,CAACG,IAAI;EACxB;;EAEA;EACA,MAAaY,QAAQ,CAACJ,IAAe,EAAEK,MAAc,EAAsB;IACvE,MAAMhB,QAAQ,GAAG,MAAMb,KAAK,CAAC8B,GAAG,CAAYxB,MAAM,CAACyB,WAAW,GAAGF,MAAM,EAAEL,IAAI,CAAC;IAACQ,CAAC;IAChFX,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC5BD,OAAO,CAACC,GAAG,CAACT,QAAQ,CAACG,IAAI,CAAC;IAC1Bf,KAAK,CAACgB,QAAQ,CAACZ,gBAAgB,CAACmB,IAAI,CAAC,CAAC;IACtC,OAAOX,QAAQ,CAACG,IAAI;EACxB;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA,MAAaiB,WAAW,CAACJ,MAAc,EAAiB;IACpD,MAAM7B,KAAK,CAACkC,MAAM,CAAC5B,MAAM,CAAC6B,cAAc,GAAGN,MAAM,CAAC;IAClD5B,KAAK,CAACgB,QAAQ,CAACd,gBAAgB,CAAC0B,MAAM,CAAC,CAAC;EAC5C;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;AACJ;;AAEA,MAAMO,YAAY,GAAG,IAAI7B,YAAY,EAAE;AACvC,eAAe6B,YAAY"},"metadata":{},"sourceType":"module"}